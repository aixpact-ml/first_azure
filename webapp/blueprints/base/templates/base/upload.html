{% extends "base_empty.html" %}
{% import 'macros/dropdown.html' as f with context %}

{% block content %}
    <div class="jumbotron-fluid">
        <h1>h<b>API</b>days</h1>
        <h2>One free API a day</h2>
        <span>This API forecasts your timeseries.</span><br>

        <form action="" method="post" enctype="multipart/form-data" novalidate>
            {{ form.hidden_tag() }}
            <p>
                <span>Upload your local file for this API.</span><br>
                {{ form.file.label }}: {{ form.file(size=64) }}
            </p>
            <p>
                <span>We will send the API result to your email.</span><br>
                <!-- {{ form.email.label }}: {{ form.email(size=32) }} -->
            </p>

                <div class="col-md-3 mb-3">
                    <label for="email">Email</label>
                    <input type="text" class="form-control" id="email" placeholder="me@email.com" required>
                    <div class="invalid-feedback">
                        Please provide a valid email address.
                    </div>
                </div>


<!--             <p>
                <span>API function</span><br>

                {{ form.function.label }}: {{ form.function(size=64) }}
            </p> -->

            {{ form.function.label }}: {{ f(form.function) }}

            <!-- Example single danger button -->
<!--             <div class="btn-group">
              <button type="button" class="btn btn-outline-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Function
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else here</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Separated link</a>
              </div>
            </div> -->

            <button type="submit" class="btn btn-outline-primary">Get it!</button>
            <p></p>
        </form>
    </div>






    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
    {% for message in messages %}
        {% if "Error" not in message[1]: %}
            <div class="alert alert-info">
            <strong>Success! </strong> {{ message[1] }}
            </div>
        {% endif %}
        {% if "Error" in message[1]: %}
            <div class="alert alert-danger">
            <strong>Error: </strong> {{ message[1] }}
            </div>
        {% endif %}
    {% endfor %}
        {% endif %}
    {% endwith %}

{% endblock %}
